<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .main-container {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            height: 100vh;
            position: relative;
        }
        .box {
            border: 1px solid #000;
            display: flex;
            justify-content: center;
            align-items: center;
            resize: both;
            overflow: auto;
            min-width: 100px;
            min-height: 100px;
            box-sizing: border-box;
        }
        .resizer {
            width: 10px;
            height: 10px;
            background: gray;
            position: absolute;
            right: 0;
            bottom: 0;
            cursor: se-resize;
        }
    </style>
</head>
<body>
    <div id="main-container" class="main-container"></div>
    <button id="add-right">Add Box to Right</button>
    <button id="add-bottom">Add Box to Bottom</button>

    <script>
        class Box {
            constructor(id) {
                this.id = id;
                this.element = document.createElement('div');
                this.element.className = 'box';
                this.element.innerText = `Box ${id}`;
                this.initResize();
            }

            initResize() {
                const resizer = document.createElement('div');
                resizer.className = 'resizer';
                this.element.appendChild(resizer);

                resizer.addEventListener('mousedown', this.startResize.bind(this));
            }

            startResize(event) {
                event.preventDefault();
                document.addEventListener('mousemove', this.resize.bind(this));
                document.addEventListener('mouseup', this.stopResize.bind(this));
            }

            resize(event) {
                const width = event.clientX - this.element.getBoundingClientRect().left;
                const height = event.clientY - this.element.getBoundingClientRect().top;
                this.element.style.width = width + 'px';
                this.element.style.height = height + 'px';
            }

            stopResize() {
                document.removeEventListener('mousemove', this.resize.bind(this));
                document.removeEventListener('mouseup', this.stopResize.bind(this));
            }
        }

        const mainContainer = document.getElementById('main-container');
        let boxCount = 1;
        const boxes = [new Box(boxCount)];
        mainContainer.appendChild(boxes[0].element);

        function addBox(direction) {
            boxCount++;
            const newBox = new Box(boxCount);

            if (direction === 'right') {
                mainContainer.appendChild(newBox.element);
            } else if (direction === 'bottom') {
                const rowDiv = document.createElement('div');
                rowDiv.style.display = 'flex';
                rowDiv.style.width = '100%';
                rowDiv.style.boxSizing = 'border-box';
                rowDiv.appendChild(newBox.element);
                mainContainer.appendChild(rowDiv);
            }

            boxes.push(newBox);
        }

        document.getElementById('add-right').addEventListener('click', () => addBox('right'));
        document.getElementById('add-bottom').addEventListener('click', () => addBox('bottom'));
    </script>
</body>
</html>
